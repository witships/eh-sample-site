import{b as T,a as D,r as R,s as H,g as X,e as F,c as G,d as J,f as K,h as $}from"../chunks/Bq8JwGOw.js";import"../chunks/DsnmJJEf.js";import{aT as aa,aU as w,x as ea,z as ta,h as ra,U as sa,aV as la,X as N,Y as p,a1 as c,a2 as i,a3 as _,_ as P,$ as m,a0 as U,aS as oa,a4 as ia,Z as na,aW as va,g,aR as ca,aQ as Y,s as B}from"../chunks/Diw6UIRm.js";import{s as z,d as j,a as da}from"../chunks/DuK_nuCY.js";import{i as S}from"../chunks/BC6CTdml.js";import{i as fa}from"../chunks/6HtlRBP7.js";import{s as ua,a as ha}from"../chunks/CTqsiOcY.js";import{p as Z}from"../chunks/WyDq0ySf.js";function _a(a,t,n=t){var o=new WeakSet;aa(a,"input",async l=>{var s=l?a.defaultValue:a.value;if(s=I(a)?L(s):s,n(s),w!==null&&o.add(w),await ea(),s!==(s=t())){var f=a.selectionStart,d=a.selectionEnd,u=a.value.length;if(a.value=s??"",d!==null){var v=a.value.length;f===d&&d===u&&v>u?(a.selectionStart=v,a.selectionEnd=v):(a.selectionStart=f,a.selectionEnd=Math.min(d,v))}}}),(ta&&a.defaultValue!==a.value||ra(t)==null&&a.value)&&(n(I(a)?L(a.value):a.value),w!==null&&o.add(w)),sa(()=>{var l=t();if(a===document.activeElement){var s=la??w;if(o.has(s))return}I(a)&&l===L(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}function I(a){var t=a.type;return t==="number"||t==="range"}function L(a){return a===""?null:+a}function ma(){return{books:T}}const ba=!0,Na=Object.freeze(Object.defineProperty({__proto__:null,load:ma,prerender:ba},Symbol.toStringTag,{value:"Module"}));var ga=p('<a class="book-card svelte-1of7yzf"><div class="thumbnail-wrapper svelte-1of7yzf"><img class="thumbnail svelte-1of7yzf"/></div> <div class="info svelte-1of7yzf"><h2 class="book-title svelte-1of7yzf"> </h2> <p class="book-origin svelte-1of7yzf"> </p> <p class="book-class svelte-1of7yzf"><!> </p></div></a>');function ka(a,t){N(t,!0);var n=ga(),o=c(n),l=c(o);i(o);var s=_(o,2),f=c(s),d=c(f,!0);i(f);var u=_(f,2),v=c(u,!0);i(u);var b=_(u,2),V=c(b);{var C=k=>{var y=oa();P(()=>z(y,`${t.book.year??""}年`)),m(k,y)};S(V,k=>{t.book.year&&k(C)})}var E=_(V);i(b),i(s),i(n),P((k,y)=>{H(n,"href",k),H(l,"src",y),H(l,"alt",`${t.book.title??""}のサムネイル`),z(d,t.book.title),z(v,t.book.origin),z(E,` ${t.book.className??""}`)},[()=>D(t.book.slug),()=>R(t.book.thumbnail)]),m(a,n),U()}var ya=p('<button class="pwa-install-button svelte-19uqelh"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="svelte-19uqelh"><path d="M19 9H15V3H9V9H5L12 16L19 9ZM5 18V20H19V18H5Z" fill="currentColor"></path></svg> <span>アプリをインストール</span></button>');function pa(a,t){N(t,!1);const n=()=>ua(Z,"$pwaStore",o),[o,l]=ha();async function s(){await Z.install()}fa();var f=ia(),d=na(f);{var u=v=>{var b=ya();b.__click=s,m(v,b)};S(d,v=>{n().canInstall&&!n().isStandalone&&v(u)})}m(a,f),U(),l()}j(["click"]);var Sa=p('<meta name="description" content="みんなで作った絵本の一覧。"/>'),xa=p('<div class="kindergarten-header svelte-1uha8ag"><a class="kindergarten-link svelte-1uha8ag" rel="noopener"><iconify-icon></iconify-icon> <span class="svelte-1uha8ag"> </span></a></div>',2),wa=p('<div class="filters svelte-1uha8ag"><input type="text" placeholder="絵本を検索..." class="search-input svelte-1uha8ag"/></div>'),za=p('<div class="no-results svelte-1uha8ag"><p>該当する絵本が見つかりませんでした</p> <button class="svelte-1uha8ag">フィルターをリセット</button></div>'),Va=p('<div class="container svelte-1uha8ag"><header class="header svelte-1uha8ag"><!> <h1 class="title svelte-1uha8ag">絵本ギャラリー</h1> <div><!></div></header> <!> <main class="book-grid svelte-1uha8ag"></main> <!></div>');function Ua(a,t){N(t,!0);const n=t.data.books,o=X();let l=Y(""),s=Y("all"),f=ca(()=>n.filter(e=>{const r=e.title.includes(g(l))||e.className.includes(g(l)),h=g(s)==="all"||e.year===parseInt(g(s));return r&&h}));[...new Set(n.map(e=>e.year))].filter(e=>e!=null).sort((e,r)=>r-e);var d=Va();da(e=>{var r=Sa();va.title="えほんアワーズ",m(e,r)});let u;var v=c(d),b=c(v);{var V=e=>{var r=xa(),h=c(r),x=c(h);J(x,"icon","mdi:arrow-left"),K(x,1,"svelte-1uha8ag");var W=_(x,2),Q=c(W,!0);i(W),i(h),i(r),P(()=>{H(h,"href",o.kindergartenUrl),z(Q,o.kindergartenName)}),m(e,r)};S(b,e=>{o&&e(V)})}var C=_(b,4),E=c(C);{var k=e=>{pa(e,{})};S(E,e=>{o&&e(k)})}i(C),i(v);var y=_(v,2);{var q=e=>{var r=wa(),h=c(r);$(h),i(r),_a(h,()=>g(l),x=>B(l,x)),m(e,r)};S(y,e=>{n.length>6&&e(q)})}var M=_(y,2);F(M,21,()=>g(f),e=>e.id,(e,r)=>{ka(e,{get book(){return g(r)}})}),i(M);var A=_(M,2);{var O=e=>{var r=za(),h=_(c(r),2);h.__click=()=>{B(l,""),B(s,"all")},i(r),m(e,r)};S(A,e=>{g(f).length===0&&e(O)})}i(d),P(()=>u=G(d,"",u,{"--bg-color":o?.kindergartenColor||"#f8f9fa"})),m(a,d),U()}j(["click"]);export{Ua as component,Na as universal};
